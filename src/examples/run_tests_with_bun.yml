description: |
    Manual approach for running Bun's native test runner. This example shows how to manually configure Bun tests with JUnit output.
    For automatic test result collection, consider using the node/test job with test-results-for: bun (see test_with_bun_native.yml example).
    The "bun install" command will automatically be applied and Bun's cache directory will be cached.
usage:
    version: 2.1
    orbs:
        node: circleci/node@x.y # This version number refers to the version of the orb, not the version of Node.js
    jobs:
        test:
            executor:
                name: node/default
                tag: '22.19.0' # You could specify the node version via the docker image.
            steps:
                - checkout
                - node/install-bun:
                      version: '1.2.22' # Specify Bun version, or omit for latest
                - node/install-packages:
                      pkg-manager: bun
                      # Caching is handled automatically.
                      # cache-path: is configurable and defaults to ~/.bun/install/cache
                - run:
                      name: Run Bun tests
                      command: bun test
                - run:
                      name: Run Bun tests with JUnit output
                      command: bun test --reporter junit --bail
                      when: always
                - store_test_results:
                      path: ./junit.xml
    workflows:
        test_my_app:
            jobs:
                - test
