description: >
  Install/upgrade the NPM package manager to a custom version. Requires
  an existing installation of Node.js; if none exists, use this orb's
  `install` command.

parameters:
  windows:
    type: boolean
    default: false
    description: Job is running on windows
  version:
    type: string
    default: latest
    description: >
      Pick a version of NPM to install:
      https://nodejs.org/en/download/releases

steps:
  - unless:
      condition: << parameters.windows >>
      steps:
        - run: &install_npm
            name: Install NPM
            command: <<include(scripts/install-npm)>>
            environment:
              NPM_VERSION: << parameters.version >>
  - when:
      condition: << parameters.windows >>
      steps:
        - run:
          <<: *install_npm
          shell: bash.exe
